webpackHotUpdate_N_E("pages/index",{

/***/ "./react-auth0-spa.tsx":
/*!*****************************!*\
  !*** ./react-auth0-spa.tsx ***!
  \*****************************/
/*! exports provided: Auth0Context, useAuth0, Auth0Provider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Auth0Context\", function() { return Auth0Context; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"useAuth0\", function() { return useAuth0; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Auth0Provider\", function() { return Auth0Provider; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ \"./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var auth0_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! auth0-js */ \"./node_modules/auth0-js/dist/auth0.min.esm.js\");\n\n\n\n\n\nvar _jsxFileName = \"/Users/aplchian/Documents/code/buda-next/react-auth0-spa.tsx\",\n    _s = $RefreshSig$(),\n    _this = undefined,\n    _s2 = $RefreshSig$();\n\n\n\n // import history from './utils/history'\n\nvar DEFAULT_REDIRECT_CALLBACK = function DEFAULT_REDIRECT_CALLBACK() {// window.history.replaceState({}, document.title, window.location.pathname)\n};\n\n_c = DEFAULT_REDIRECT_CALLBACK;\nvar auth;\nvar Auth0Context = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createContext({});\nvar useAuth0 = function useAuth0() {\n  _s();\n\n  return Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useContext\"])(Auth0Context);\n};\n\n_s(useAuth0, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar Auth0Provider = function Auth0Provider(_ref) {\n  _s2();\n\n  var children = _ref.children,\n      _ref$onRedirectCallba = _ref.onRedirectCallback,\n      onRedirectCallback = _ref$onRedirectCallba === void 0 ? DEFAULT_REDIRECT_CALLBACK : _ref$onRedirectCallba,\n      initOptions = Object(_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_ref, [\"children\", \"onRedirectCallback\"]);\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])(),\n      isAuthenticated = _useState[0],\n      setIsAuthenticated = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])(),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])(),\n      auth0Client = _useState3[0];\n\n  var _useState4 = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])(true),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])(false),\n      popupOpen = _useState5[0];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useEffect\"])(function () {\n    var initAuth0 = /*#__PURE__*/function () {\n      var _ref2 = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                auth = new auth0_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].WebAuth(initOptions);\n                handleAuthentication();\n                getUser();\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function initAuth0() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    initAuth0(); // eslint-disable-next-line\n  }, []);\n\n  var getUser = /*#__PURE__*/function () {\n    var _ref3 = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {\n      var token;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (checkAuthenticated()) {\n                token = localStorage.getItem('access_token');\n\n                if (token) {\n                  // @ts-ignore\n                  auth.client.userInfo(token, /*#__PURE__*/function () {\n                    var _ref4 = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(err, profile) {\n                      var app_token, bdu, _isAuthenticated;\n\n                      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n                        while (1) {\n                          switch (_context2.prev = _context2.next) {\n                            case 0:\n                              if (!profile) {\n                                _context2.next = 12;\n                                break;\n                              }\n\n                              app_token = localStorage.getItem('id_token');\n                              _context2.next = 4;\n                              return axios__WEBPACK_IMPORTED_MODULE_5___default.a.get('//editserv.bdrc.io/resource-nc/user/me', {\n                                headers: {\n                                  Authorization: 'Bearer ' + app_token\n                                }\n                              });\n\n                            case 4:\n                              bdu = _context2.sent;\n                              profile.bdrcData = bdu.data;\n                              profile.bdrcID = Object.keys(bdu.data).map(function (k) {\n                                return k.replace(/^.*?[/]([^/]+)$/, 'bdu:$1');\n                              }).join();\n                              setUser(profile);\n                              _isAuthenticated = checkAuthenticated();\n                              setIsAuthenticated(_isAuthenticated);\n                              setLoading(false);\n                              console.log('profile', profile);\n\n                            case 12:\n                            case \"end\":\n                              return _context2.stop();\n                          }\n                        }\n                      }, _callee2);\n                    }));\n\n                    return function (_x, _x2) {\n                      return _ref4.apply(this, arguments);\n                    };\n                  }());\n                }\n              } else {\n                setLoading(false);\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function getUser() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var login = function login(redirect) {\n    console.log('redirect', redirect);\n    if (redirect) localStorage.setItem('auth0_redirect', JSON.stringify(redirect));else localStorage.setItem('auth0_redirect', '/');\n    auth.authorize();\n  };\n\n  var checkAuthenticated = function checkAuthenticated() {\n    // Check whether the current time is past the\n    // Access Token's expiry time\n    var item = localStorage.getItem('expires_at');\n    if (!item) return false;\n    var expiresAt = JSON.parse(item);\n    return new Date().getTime() < expiresAt;\n  };\n\n  var setSession = /*#__PURE__*/function () {\n    var _ref5 = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(authResult) {\n      var expiresAt;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              // Set the time that the Access Token will expire at\n              expiresAt = JSON.stringify(authResult.expiresIn * 1000 + new Date().getTime());\n              localStorage.setItem('access_token', authResult.accessToken);\n              localStorage.setItem('id_token', authResult.idToken);\n              localStorage.setItem('expires_at', expiresAt);\n              console.log('session', authResult);\n              getUser();\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function setSession(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var handleAuthentication = function handleAuthentication() {\n    auth.parseHash( /*#__PURE__*/function () {\n      var _ref6 = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(err, authResult) {\n        var redirect;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (authResult && authResult.accessToken && authResult.idToken) {\n                  setSession(authResult);\n                  redirect = JSON.parse(localStorage.getItem('auth0_redirect'));\n\n                  if (redirect) {\n                    // history.push(redirect)\n                    // TODO find something better to force rerendering\n                    window.location.reload();\n                  } // else window.history.replaceState(null, null, ' ')\n\n                } else if (err) {\n                  console.log(err);\n                }\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function (_x4, _x5) {\n        return _ref6.apply(this, arguments);\n      };\n    }());\n  };\n  /*\n  const initAuth0 = async () => {\n    \n    const auth0FromHook = await createAuth0Client(initOptions);\n     setAuth0(auth0FromHook);      \n     if (window.location.search.includes(\"code=\") &&\n        window.location.search.includes(\"state=\")) {\n        try {\n          const { appState } = await auth0FromHook.handleRedirectCallback();\n          onRedirectCallback(appState);\n        }\n        catch(e) {\n          console.error(\"auth0 error\",e)\n        }\n    }\n     const isAuthenticated = await auth0FromHook.isAuthenticated();\n     setIsAuthenticated(isAuthenticated);\n     if (isAuthenticated) {\n      const user = await auth0FromHook.getUser();\n      setUser(user);\n    }\n     setLoading(false);\n  };\n  const loginWithPopup = async (params = {}) => {\n  setPopupOpen(true);\n  try {\n    await auth0Client.loginWithPopup(params);\n  } catch (error) {\n    console.error(error);\n  } finally {\n    setPopupOpen(false);\n  }\n  const user = await auth0Client.getUser();\n  setUser(user);\n  setIsAuthenticated(true);\n  };\n  const handleRedirectCallback = async () => {\n  setLoading(true);\n  await auth0Client.handleRedirectCallback();\n  const user = await auth0Client.getUser();\n  setLoading(false);\n  setIsAuthenticated(true);\n  setUser(user);\n  };\n  */\n\n\n  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxDEV\"])(Auth0Context.Provider, {\n    value: {\n      isAuthenticated: isAuthenticated,\n      user: user,\n      loading: loading,\n      popupOpen: popupOpen,\n      // handleRedirectCallback,\n      // @ts-ignore\n      getIdTokenClaims: function getIdTokenClaims() {\n        return auth0Client.getIdTokenClaims.apply(auth0Client, arguments);\n      },\n      // @ts-ignore\n      loginWithRedirect: function loginWithRedirect() {\n        return login.apply(void 0, arguments);\n      },\n      // @ts-ignore\n      getTokenSilently: function getTokenSilently() {\n        return auth0Client.getTokenSilently.apply(auth0Client, arguments);\n      },\n      getTokenWithPopup: function getTokenWithPopup() {\n        return (// @ts-ignore\n          auth0Client.getTokenWithPopup.apply(auth0Client, arguments)\n        );\n      },\n      logout: function logout() {\n        localStorage.removeItem('access_token');\n        localStorage.removeItem('id_token');\n        localStorage.removeItem('expires_at');\n        setIsAuthenticated(false);\n      }\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 9\n  }, _this);\n};\n\n_s2(Auth0Provider, \"UmVzWpK4m690vJdyIyvQvEeCpBA=\");\n\n_c2 = Auth0Provider;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DEFAULT_REDIRECT_CALLBACK\");\n$RefreshReg$(_c2, \"Auth0Provider\");\n\n;\n    var _a, _b;\n    // Legacy CSS implementations will `eval` browser code in a Node.js context\n    // to extract CSS. For backwards compatibility, we need to check we're in a\n    // browser context before continuing.\n    if (typeof self !== 'undefined' &&\n        // AMP / No-JS mode does not inject these helpers:\n        '$RefreshHelpers$' in self) {\n        var currentExports = module.__proto__.exports;\n        var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n        // This cannot happen in MainTemplate because the exports mismatch between\n        // templating and execution.\n        self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.i);\n        // A module can be accepted automatically based on its exports, e.g. when\n        // it is a Refresh Boundary.\n        if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n            // Save the previous exports on update so we can compare the boundary\n            // signatures.\n            module.hot.dispose(function (data) {\n                data.prevExports = currentExports;\n            });\n            // Unconditionally accept an update to this module, we'll check if it's\n            // still a Refresh Boundary later.\n            module.hot.accept();\n            // This field is set when the previous version of this module was a\n            // Refresh Boundary, letting us know we need to check for invalidation or\n            // enqueue an update.\n            if (prevExports !== null) {\n                // A boundary can become ineligible if its exports are incompatible\n                // with the previous exports.\n                //\n                // For example, if you add/remove/change exports, we'll want to\n                // re-execute the importing modules, and force those components to\n                // re-render. Similarly, if you convert a class component to a\n                // function, we want to invalidate the boundary.\n                if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                    module.hot.invalidate();\n                }\n                else {\n                    self.$RefreshHelpers$.scheduleUpdate();\n                }\n            }\n        }\n        else {\n            // Since we just executed the code for the module, it's possible that the\n            // new exports made it ineligible for being a boundary.\n            // We only care about the case when we were _previously_ a boundary,\n            // because we already accepted this update (accidental side effect).\n            var isNoLongerABoundary = prevExports !== null;\n            if (isNoLongerABoundary) {\n                module.hot.invalidate();\n            }\n        }\n    }\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/webpack/buildin/harmony-module.js */ \"./node_modules/webpack/buildin/harmony-module.js\")(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vcmVhY3QtYXV0aDAtc3BhLnRzeD9hNGU0Il0sIm5hbWVzIjpbIkRFRkFVTFRfUkVESVJFQ1RfQ0FMTEJBQ0siLCJhdXRoIiwiQXV0aDBDb250ZXh0IiwiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQXV0aDAiLCJ1c2VDb250ZXh0IiwiQXV0aDBQcm92aWRlciIsImNoaWxkcmVuIiwib25SZWRpcmVjdENhbGxiYWNrIiwiaW5pdE9wdGlvbnMiLCJ1c2VTdGF0ZSIsImlzQXV0aGVudGljYXRlZCIsInNldElzQXV0aGVudGljYXRlZCIsInVzZXIiLCJzZXRVc2VyIiwiYXV0aDBDbGllbnQiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsInBvcHVwT3BlbiIsInVzZUVmZmVjdCIsImluaXRBdXRoMCIsImF1dGgwIiwiV2ViQXV0aCIsImhhbmRsZUF1dGhlbnRpY2F0aW9uIiwiZ2V0VXNlciIsImNoZWNrQXV0aGVudGljYXRlZCIsInRva2VuIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNsaWVudCIsInVzZXJJbmZvIiwiZXJyIiwicHJvZmlsZSIsImFwcF90b2tlbiIsImF4aW9zIiwiZ2V0IiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJiZHUiLCJiZHJjRGF0YSIsImRhdGEiLCJiZHJjSUQiLCJPYmplY3QiLCJrZXlzIiwibWFwIiwiayIsInJlcGxhY2UiLCJqb2luIiwiY29uc29sZSIsImxvZyIsImxvZ2luIiwicmVkaXJlY3QiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImF1dGhvcml6ZSIsIml0ZW0iLCJleHBpcmVzQXQiLCJwYXJzZSIsIkRhdGUiLCJnZXRUaW1lIiwic2V0U2Vzc2lvbiIsImF1dGhSZXN1bHQiLCJleHBpcmVzSW4iLCJhY2Nlc3NUb2tlbiIsImlkVG9rZW4iLCJwYXJzZUhhc2giLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImdldElkVG9rZW5DbGFpbXMiLCJsb2dpbldpdGhSZWRpcmVjdCIsImdldFRva2VuU2lsZW50bHkiLCJnZXRUb2tlbldpdGhQb3B1cCIsImxvZ291dCIsInJlbW92ZUl0ZW0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0NBRUE7O0FBRUEsSUFBTUEseUJBQXlCLEdBQUcsU0FBNUJBLHlCQUE0QixHQUFNLENBQ3BDO0FBQ0gsQ0FGRDs7S0FBTUEseUI7QUFJTixJQUFJQyxJQUFKO0FBRU8sSUFBTUMsWUFBWSxnQkFBR0MsNENBQUssQ0FBQ0MsYUFBTixDQUFvQixFQUFwQixDQUFyQjtBQVNBLElBQU1DLFFBQVEsR0FBRyxTQUFYQSxRQUFXO0FBQUE7O0FBQUEsU0FBZ0JDLHdEQUFVLENBQUNKLFlBQUQsQ0FBMUI7QUFBQSxDQUFqQjs7R0FBTUcsUTs7QUFFTixJQUFNRSxhQUFhLEdBQUcsU0FBaEJBLGFBQWdCLE9BUXZCO0FBQUE7O0FBQUEsTUFQRkMsUUFPRSxRQVBGQSxRQU9FO0FBQUEsbUNBTkZDLGtCQU1FO0FBQUEsTUFORkEsa0JBTUUsc0NBTm1CVCx5QkFNbkI7QUFBQSxNQUxDVSxXQUtEOztBQUFBLGtCQUM0Q0Msc0RBQVEsRUFEcEQ7QUFBQSxNQUNLQyxlQURMO0FBQUEsTUFDc0JDLGtCQUR0Qjs7QUFBQSxtQkFFc0JGLHNEQUFRLEVBRjlCO0FBQUEsTUFFS0csSUFGTDtBQUFBLE1BRVdDLE9BRlg7O0FBQUEsbUJBR29CSixzREFBUSxFQUg1QjtBQUFBLE1BR0tLLFdBSEw7O0FBQUEsbUJBSTRCTCxzREFBUSxDQUFDLElBQUQsQ0FKcEM7QUFBQSxNQUlLTSxPQUpMO0FBQUEsTUFJY0MsVUFKZDs7QUFBQSxtQkFLa0JQLHNEQUFRLENBQUMsS0FBRCxDQUwxQjtBQUFBLE1BS0tRLFNBTEw7O0FBT0ZDLHlEQUFTLENBQUMsWUFBTTtBQUNaLFFBQU1DLFNBQVM7QUFBQSxtTUFBRztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ2RwQixvQkFBSSxHQUFHLElBQUlxQixnREFBSyxDQUFDQyxPQUFWLENBQWtCYixX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VUFBYixDQUF3QixVQUF4QjtBQUNBaEQsb0JBQVksQ0FBQ2dELFVBQWIsQ0FBd0IsWUFBeEI7QUFDQS9ELDBCQUFrQixDQUFDLEtBQUQsQ0FBbEI7QUFDSDtBQXBCRSxLQURYO0FBQUEsY0F3QktMO0FBeEJMO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0FESjtBQTRCSCxDQXpNTTs7SUFBTUQsYTs7TUFBQUEsYSIsImZpbGUiOiIuL3JlYWN0LWF1dGgwLXNwYS50c3guanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJ1xuaW1wb3J0IGF1dGgwLCB7IEF1dGhPcHRpb25zIH0gZnJvbSAnYXV0aDAtanMnXG4vLyBpbXBvcnQgaGlzdG9yeSBmcm9tICcuL3V0aWxzL2hpc3RvcnknXG5cbmNvbnN0IERFRkFVTFRfUkVESVJFQ1RfQ0FMTEJBQ0sgPSAoKSA9PiB7XG4gICAgLy8gd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKVxufVxuXG52YXIgYXV0aDogYXV0aDAuV2ViQXV0aFxuXG5leHBvcnQgY29uc3QgQXV0aDBDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7fSlcblxuaW50ZXJmYWNlIEF1dGhVc2VyIHtcbiAgICB1c2VyPzogYW55XG4gICAgbG9hZGluZz86IGJvb2xlYW5cbiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW5cbiAgICBsb2dpbldpdGhSZWRpcmVjdDogYW55XG4gICAgbG9nb3V0OiBhbnlcbn1cbmV4cG9ydCBjb25zdCB1c2VBdXRoMCA9ICgpOiBBdXRoVXNlciA9PiB1c2VDb250ZXh0KEF1dGgwQ29udGV4dCkgYXMgQXV0aFVzZXJcblxuZXhwb3J0IGNvbnN0IEF1dGgwUHJvdmlkZXIgPSAoe1xuICAgIGNoaWxkcmVuLFxuICAgIG9uUmVkaXJlY3RDYWxsYmFjayA9IERFRkFVTFRfUkVESVJFQ1RfQ0FMTEJBQ0ssXG4gICAgLi4uaW5pdE9wdGlvbnNcbn06IHtcbiAgICBzXG4gICAgY2hpbGRyZW46IFJlYWN0LlJlYWN0RWxlbWVudFxuICAgIG9uUmVkaXJlY3RDYWxsYmFjazogKGFwcFN0YXRlOiB7IHRhcmdldFVybDogYW55IH0pID0+IHZvaWRcbn0pID0+IHtcbiAgICBjb25zdCBbaXNBdXRoZW50aWNhdGVkLCBzZXRJc0F1dGhlbnRpY2F0ZWRdID0gdXNlU3RhdGU8Ym9vbGVhbj4oKVxuICAgIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKClcbiAgICBjb25zdCBbYXV0aDBDbGllbnRdID0gdXNlU3RhdGUoKVxuICAgIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpXG4gICAgY29uc3QgW3BvcHVwT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSlcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGluaXRBdXRoMCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF1dGggPSBuZXcgYXV0aDAuV2ViQXV0aChpbml0T3B0aW9ucyBhcyBBdXRoT3B0aW9ucylcbiAgICAgICAgICAgIGhhbmRsZUF1dGhlbnRpY2F0aW9uKClcbiAgICAgICAgICAgIGdldFVzZXIoKVxuICAgICAgICB9XG5cbiAgICAgICAgaW5pdEF1dGgwKClcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgfSwgW10pXG5cbiAgICBjb25zdCBnZXRVc2VyID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoY2hlY2tBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpXG4gICAgICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgYXV0aC5jbGllbnQudXNlckluZm8odG9rZW4sIGFzeW5jIChcbiAgICAgICAgICAgICAgICAgICAgZXJyOiBhbnksXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgcHJvZmlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgKHByZXZTdGF0ZTogdW5kZWZpbmVkKTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICBiZHJjRGF0YT86IGFueVxuICAgICAgICAgICAgICAgICAgICAgICAgYmRyY0lEPzogYW55XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwcF90b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZF90b2tlbicpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiZHUgPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy8vZWRpdHNlcnYuYmRyYy5pby9yZXNvdXJjZS1uYy91c2VyL21lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGFwcF90b2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlLmJkcmNEYXRhID0gYmR1LmRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGUuYmRyY0lEID0gT2JqZWN0LmtleXMoYmR1LmRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChrID0+IGsucmVwbGFjZSgvXi4qP1svXShbXi9dKykkLywgJ2JkdTokMScpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFVzZXIocHJvZmlsZSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBdXRoZW50aWNhdGVkID0gY2hlY2tBdXRoZW50aWNhdGVkKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldElzQXV0aGVudGljYXRlZChpc0F1dGhlbnRpY2F0ZWQpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcm9maWxlJywgcHJvZmlsZSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbG9naW4gPSAocmVkaXJlY3Q6IGFueSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygncmVkaXJlY3QnLCByZWRpcmVjdClcbiAgICAgICAgaWYgKHJlZGlyZWN0KVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F1dGgwX3JlZGlyZWN0JywgSlNPTi5zdHJpbmdpZnkocmVkaXJlY3QpKVxuICAgICAgICBlbHNlIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhdXRoMF9yZWRpcmVjdCcsICcvJylcbiAgICAgICAgYXV0aC5hdXRob3JpemUoKVxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrQXV0aGVudGljYXRlZCA9ICgpID0+IHtcbiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciB0aGUgY3VycmVudCB0aW1lIGlzIHBhc3QgdGhlXG4gICAgICAgIC8vIEFjY2VzcyBUb2tlbidzIGV4cGlyeSB0aW1lXG4gICAgICAgIGxldCBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2V4cGlyZXNfYXQnKVxuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybiBmYWxzZVxuICAgICAgICBsZXQgZXhwaXJlc0F0ID0gSlNPTi5wYXJzZShpdGVtKVxuICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgPCBleHBpcmVzQXRcbiAgICB9XG5cbiAgICBjb25zdCBzZXRTZXNzaW9uID0gYXN5bmMgKGF1dGhSZXN1bHQ6IGF1dGgwLkF1dGgwRGVjb2RlZEhhc2gpID0+IHtcbiAgICAgICAgLy8gU2V0IHRoZSB0aW1lIHRoYXQgdGhlIEFjY2VzcyBUb2tlbiB3aWxsIGV4cGlyZSBhdFxuICAgICAgICBsZXQgZXhwaXJlc0F0ID0gSlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICBhdXRoUmVzdWx0LmV4cGlyZXNJbiAqIDEwMDAgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuICAgICAgICApXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY2Nlc3NfdG9rZW4nLCBhdXRoUmVzdWx0LmFjY2Vzc1Rva2VuKVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaWRfdG9rZW4nLCBhdXRoUmVzdWx0LmlkVG9rZW4pXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdleHBpcmVzX2F0JywgZXhwaXJlc0F0KVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdzZXNzaW9uJywgYXV0aFJlc3VsdClcblxuICAgICAgICBnZXRVc2VyKClcbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVBdXRoZW50aWNhdGlvbiA9ICgpID0+IHtcbiAgICAgICAgYXV0aC5wYXJzZUhhc2goYXN5bmMgKGVyciwgYXV0aFJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgaWYgKGF1dGhSZXN1bHQgJiYgYXV0aFJlc3VsdC5hY2Nlc3NUb2tlbiAmJiBhdXRoUmVzdWx0LmlkVG9rZW4pIHtcbiAgICAgICAgICAgICAgICBzZXRTZXNzaW9uKGF1dGhSZXN1bHQpXG4gICAgICAgICAgICAgICAgbGV0IHJlZGlyZWN0ID0gSlNPTi5wYXJzZShcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGgwX3JlZGlyZWN0JylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaWYgKHJlZGlyZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGhpc3RvcnkucHVzaChyZWRpcmVjdClcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBmaW5kIHNvbWV0aGluZyBiZXR0ZXIgdG8gZm9yY2UgcmVyZW5kZXJpbmdcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVsc2Ugd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsIG51bGwsICcgJylcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qXG4gICAgY29uc3QgaW5pdEF1dGgwID0gYXN5bmMgKCkgPT4ge1xuICAgICAgXG4gICAgICBjb25zdCBhdXRoMEZyb21Ib29rID0gYXdhaXQgY3JlYXRlQXV0aDBDbGllbnQoaW5pdE9wdGlvbnMpO1xuXG4gICAgICBzZXRBdXRoMChhdXRoMEZyb21Ib29rKTsgICAgICBcblxuICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoXCJjb2RlPVwiKSAmJlxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoXCJzdGF0ZT1cIikpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBhcHBTdGF0ZSB9ID0gYXdhaXQgYXV0aDBGcm9tSG9vay5oYW5kbGVSZWRpcmVjdENhbGxiYWNrKCk7XG4gICAgICAgICAgICBvblJlZGlyZWN0Q2FsbGJhY2soYXBwU3RhdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiYXV0aDAgZXJyb3JcIixlKVxuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgaXNBdXRoZW50aWNhdGVkID0gYXdhaXQgYXV0aDBGcm9tSG9vay5pc0F1dGhlbnRpY2F0ZWQoKTtcblxuICAgICAgc2V0SXNBdXRoZW50aWNhdGVkKGlzQXV0aGVudGljYXRlZCk7XG5cbiAgICAgIGlmIChpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGF1dGgwRnJvbUhvb2suZ2V0VXNlcigpO1xuICAgICAgICBzZXRVc2VyKHVzZXIpO1xuICAgICAgfVxuXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9O1xuICBjb25zdCBsb2dpbldpdGhQb3B1cCA9IGFzeW5jIChwYXJhbXMgPSB7fSkgPT4ge1xuICAgIHNldFBvcHVwT3Blbih0cnVlKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYXV0aDBDbGllbnQubG9naW5XaXRoUG9wdXAocGFyYW1zKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldFBvcHVwT3BlbihmYWxzZSk7XG4gICAgfVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBhdXRoMENsaWVudC5nZXRVc2VyKCk7XG4gICAgc2V0VXNlcih1c2VyKTtcbiAgICBzZXRJc0F1dGhlbnRpY2F0ZWQodHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmVkaXJlY3RDYWxsYmFjayA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgIGF3YWl0IGF1dGgwQ2xpZW50LmhhbmRsZVJlZGlyZWN0Q2FsbGJhY2soKTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgYXV0aDBDbGllbnQuZ2V0VXNlcigpO1xuICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIHNldElzQXV0aGVudGljYXRlZCh0cnVlKTtcbiAgICBzZXRVc2VyKHVzZXIpO1xuICB9O1xuICAgICovXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8QXV0aDBDb250ZXh0LlByb3ZpZGVyXG4gICAgICAgICAgICB2YWx1ZT17e1xuICAgICAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZCxcbiAgICAgICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgICAgIGxvYWRpbmcsXG4gICAgICAgICAgICAgICAgcG9wdXBPcGVuLFxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZVJlZGlyZWN0Q2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGdldElkVG9rZW5DbGFpbXM6ICguLi5wKSA9PiBhdXRoMENsaWVudC5nZXRJZFRva2VuQ2xhaW1zKC4uLnApLFxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBsb2dpbldpdGhSZWRpcmVjdDogKC4uLnApID0+IGxvZ2luKC4uLnApLFxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBnZXRUb2tlblNpbGVudGx5OiAoLi4ucCkgPT4gYXV0aDBDbGllbnQuZ2V0VG9rZW5TaWxlbnRseSguLi5wKSxcbiAgICAgICAgICAgICAgICBnZXRUb2tlbldpdGhQb3B1cDogKC4uLnA6IGFueSkgPT5cbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBhdXRoMENsaWVudC5nZXRUb2tlbldpdGhQb3B1cCguLi5wKSxcbiAgICAgICAgICAgICAgICBsb2dvdXQ6ICguLi5wOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjY2Vzc190b2tlbicpXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpZF90b2tlbicpXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdleHBpcmVzX2F0JylcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNBdXRoZW50aWNhdGVkKGZhbHNlKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDwvQXV0aDBDb250ZXh0LlByb3ZpZGVyPlxuICAgIClcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./react-auth0-spa.tsx\n");

/***/ })

})